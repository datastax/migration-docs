= Phases of the {product} process
:navtitle: About the {product-short} process
:description: Before you begin, learn about migration concepts, software components, and the sequence of operations.

With the {product} ({product-short}) process, your applications can continue to run while you migrate data from one {cass-short}-based database to another, resulting in little or no downtime and minimal service interruptions.

.Why migrate?
[%collapsible]
====
There are many reasons that you might need to migrate data and applications.
For example:

* You want to move to a different database provider.
For example, you might move from self-managed clusters to a cloud-based Database-as-a-Service (DBaaS), such as {astra-db}.

* You need to upgrade a cluster to a newer version or infrastructure.

* You want to move client applications from shared clusters to dedicated clusters for greater control over individual configurations.

* You want to consolidate client applications running on separate clusters onto one shared cluster to minimize sprawl and maintenance.
====

The {product-short} process uses {product-proxy}, {product-utility}, and {product-automation} to orchestrate live reads and writes on your databases while you move and validate data with a data migration tool, such as {sstable-sideloader}, {cass-migrator}, or {dsbulk-migrator}.

{product-proxy} keeps your databases in sync at all times through its dual-writes feature, which means you can seamlessly stop or abandon the migration at any point before the last phase of the migration (the final cutover to the new database).
For more information about these tools, see xref:ROOT:components.adoc[].

When the migration is complete, all data is present in the new database, and you can switch your client applications to connect exclusively to the new database.
The old database becomes obsolete and can be shut down.

== Requirements for zero downtime

True zero downtime migration with {product-proxy} is only possible if your database meets the minimum requirements, including cluster compatibility, that are described in xref:ROOT:feasibility-checklists.adoc[]
If your database doesn't meet these requirements, you can still complete the migration, but you might not be able to use {product-proxy} and some downtime might be necessary to finish the migration.

== Migration phases

A migration project includes preparation for the migration and five migration phases.

The following sections describe the major events in each phase and how your client applications connect to your origin cluster, {product-proxy}, and the target cluster during each phase.

The _origin cluster_ is is your existing {cass-short}-based environment, such as {dse-short} or open-source {cass}.
The _target cluster_ is your new {cass-short}-based environment where you want to migrate your data and client applications.

=== Plan and prepare for your migration

From a functional standpoint, before you begin a migration, your client applications perform read/write operations directly with your existing xref:cql:ROOT:index.adoc[CQL]-compatible database, such as {cass}, {dse-short}, {hcd-short}, or {astra-db}.
Over the course of the migration, the contact points change to incorporate {product-proxy} and eventually switch to the target database.

image:pre-migration0ra.png[Before the migration begins, your applications connect exclusively to your origin cluster]

To plan and prepare for the migration, do the following:

. xref:ROOT:feasibility-checklists.adoc[]: Review compatibility requirements for {product-proxy}, and understand how certain operations are handled by {product-proxy}.
+
[IMPORTANT]
====
To successfully migrate with {product-proxy}, a read or write request produced by your client application must be able to succeed _without modification_ on both your origin (existing) and target (new) clusters.
This means that the origin and target clusters must have matching schemas, including keyspace names, table names, column names, and data types.

You might need to adjust your data model or application logic to ensure compatibility between the two clusters during the migration and ongoing compatibility with the target cluster after the migration.

For more information, see xref:feasibility-checklists.adoc[].
====

. xref:ROOT:deployment-infrastructure.adoc[]: Set up the infrastructure to host the {product-short} tools.

. xref:ROOT:create-target.adoc[]: Set up your target cluster, and create schemas that match those on your origin cluster.

. xref:ROOT:rollback.adoc[]: Learn when and how you can stop or rollback an in-progress migration.

=== Phase 1: Deploy {product-proxy} and connect client applications

In this first phase, deploy the {product-proxy} instances and connect client applications to the proxies.
This phase activates the dual-write logic.
Writes are sent to both the origin and target databases, while reads are executed on the origin only.

For more information and instructions, see xref:ROOT:phase1.adoc[Phase 1: Deploy and connect {product-proxy}].

image:migration-phase1ra.png[In Phase 1, you deploy and connect {product-proxy}]

=== Phase 2: Migrate data

In this phase, you use a data migration tool to copy your existing data to the target database.
{product-proxy} continues to perform dual writes so that you can focus on moving data that was present before you connected {product-proxy}.
Then, you thoroughly validate the migrated data, resolving missing and mismatched records, before moving on to the next phase.

For more information and instructions, see xref:ROOT:migrate-and-validate-data.adoc[].

image:migration-phase2ra.png[In Phase 2, you migrate and validate data from the origin cluster to the target cluster]

=== Phase 3: Enable asynchronous dual reads

This phase is optional but recommended.

In this phase, you can enable the _asynchronous dual reads_ feature to test the target database's ability to handle a production workload before you permanently switch your applications to the target database at the end of the migration process.

When enabled, {product-proxy} sends asynchronous read requests to the secondary database in addition to the synchronous read requests that are sent to the primary database by default.

For more information, see xref:ROOT:enable-async-dual-reads.adoc[] and xref:ROOT:components.adoc#how_zdm_proxy_handles_reads_and_writes[How {product-proxy} handles reads and writes].

image:migration-phase3ra.png[In Phase 3, you test your target cluster's production readiness]

=== Phase 4: Route reads to the target database

In this phase, read routing on {product-proxy} is switched to the target database so that all reads are executed on the target.
Writes are still sent to both databases in case you need to rollback the migration.

At this point, the target database becomes the primary database.

For more information and instructions, see xref:ROOT:change-read-routing.adoc[].

image:migration-phase4ra9.png[In Phase 4, you route reads to the target cluster exclusively]

=== Phase 5: Connect directly to the target database

In the final phase of the migration, you move your client applications off {product-proxy} and connect them directly to the target database.

Once this happens, the migration is complete, and you now exclusively use the target database.

Whether you choose to destroy to retain the origin database depends on your organization's policies and whether you might need to revert to it in the future.
However, be aware that the origin database is no longer synchronized with the target database, and the origin database won't contain writes that happen after you disconnect {product-proxy}.

For more information, see xref:ROOT:connect-clients-to-target.adoc[].

image:migration-phase5ra.png[In Phase 5, you connect your client applications directly and exclusively to the target cluster]

[#lab]
== {product} interactive lab

As a companion to the {product-short} documentation, you can use the https://app.gitpod.io/login?navigateTo=%2F%23https%3A%2F%2Fgithub.com%2FDataStax-Academy%2Fzdm-scenario-katapod.git[{product} interactive lab] to try the entire migration process in a demo environment.

The lab only requires a GitHub account and a supported browser.
All browsers are supported except Safari.

You don't need to install anything because the lab uses a pre-configured GitPod environment.

This lab provides an interactive, detailed walkthrough of the migration process, including pre-migration preparation and each of the five migration phases.
The lab describes and demonstrates all steps and automation required to prepare for and complete a migration from any supported origin database to any supported target database.

== Get help with your migration

* xref:ROOT:troubleshooting-tips.adoc[]
* xref:ROOT:faqs.adoc[]